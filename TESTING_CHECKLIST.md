# 🧪 测试清单 - AI Prompt Builder Pro v2.0

## 部署状态
- 🌐 生产环境: https://www.aiprompts.ink
- 🚀 GitHub: https://github.com/kexing6400/ai-prompt-generator  
- ⚡ Vercel: 自动部署中...

## 已完成的关键修复

### 1. 🌍 语言切换器集成 ✅
- **位置**: 全局导航栏右上角
- **实现**: 在`app/layout.tsx`中添加全局Header
- **组件**: `components/ui/language-switcher.tsx`
- **功能**: 支持中英文切换，使用localStorage保存偏好

### 2. 🤖 API升级到v2 ✅  
- **路径**: `/api/generate-prompt-v2`
- **模型**: Claude 3.5 Sonnet (不再是Haiku)
- **改进**: 
  - 真正的AI智能生成，而非字符串拼接
  - 包含行业专业知识库
  - 质量评分系统（低于60分自动重新生成）
  - Token限制提升到2000

### 3. 🔧 前端调用更新 ✅
- **文件**: `lib/hooks/use-prompt-generator.ts`
- **更改**: 
  - 调用路径从`/api/generate-prompt`改为`/api/generate-prompt-v2`
  - 参数映射：`prompt → goal`, `context → requirements`
  - 添加locale参数支持国际化

## 需要测试的功能

### 基础功能测试
- [ ] 访问主页 https://www.aiprompts.ink
- [ ] 检查语言切换器是否显示在导航栏
- [ ] 测试中英文切换功能
- [ ] 验证语言偏好是否保存（刷新后保持）

### 核心功能测试
- [ ] 选择一个行业（如律师）
- [ ] 填写表单：
  - 场景类型：合同审查
  - 任务目标：审查租房合同，识别风险条款  
  - 具体要求：上海地区，月租8000元，2年期合同
- [ ] 点击生成按钮
- [ ] **验证生成的内容是否为用户可用的专业提示词**（而非元提示词）
- [ ] 检查质量分数是否显示在控制台
- [ ] 测试复制功能
- [ ] 测试重新生成功能

### 环境变量确认
**重要**: 确保Vercel已配置`OPENROUTER_API_KEY`环境变量

## 预期的生成结果示例

### ❌ 错误的输出（元提示词）：
```
【行业背景】保险顾问专业场景
【具体场景】risk-assessment  
【任务目标】为客户评估保险需求
【输出要求】...
```

### ✅ 正确的输出（用户提示词）：
```
你是一位精通上海市租赁法规的资深房产律师，拥有10年以上租赁纠纷处理经验。

我需要你审查一份上海地区的租房合同，月租金8000元，租期2年。请按以下要求进行：

【必查红线条款】
1. 租金调整：检查是否存在"房东可随时调整租金"的不合法条款
2. 押金条款：确认押金是否超过2个月房租（上海规定上限）
3. 违约金设置：核实违约金是否超过月租金的20%
...

【输出格式】
请按以下格式提供审查报告：
1. 风险等级评估：[高/中/低]
2. 必须修改的条款：[详细列表]
3. 谈判建议：[具体策略]
```

## 问题排查

如果语言切换器不显示：
1. 检查浏览器控制台错误
2. 确认`@radix-ui/react-dropdown-menu`依赖已安装
3. 检查组件导入路径是否正确

如果API返回错误：
1. 检查Vercel环境变量`OPENROUTER_API_KEY`
2. 查看Vercel函数日志
3. 确认API请求参数格式正确

## 下一步行动
1. 等待Vercel部署完成（约2-3分钟）
2. 按照上述清单逐项测试
3. 记录任何问题或异常
4. 如需修复，立即处理

---

更新时间：2024-12-XX
版本：v2.0.0